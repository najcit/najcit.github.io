---
title: 如何学习 Docker (I)
published: true
categories: [program]
tags: [docker]
---

Docker 简介
> * Docker 是一个开源的应用容器引擎，基于 Go 语言
> * 可以打包应用以及依赖包到一 个轻量级、可移植的容器中
> * Docker 打包好了的容器，可以发布到任何流行的 Linux 机器上，也可以实现虚拟化
> * 容器是完全使用沙箱机制，相互之间不会有任何接口（独立）
> * 容器性能开销极低
> * Docker 使用客户端-服务器 (C/S) 架构模式，使用远程 API 来管理和创建 Docker 容器
> * Docker 是实现容器技术的一种工具
> * Docker 容器还可以进行版本管理、复制、分享、修改，就像管理普通的代码一样

Docker 典型应用场景:
> * 让应用快速打包与容易自动化部署
> * 创建轻量、私密的 PAAS(Platform as a Service) 环境
> * 实现自动化测试和持续的集成/部署
> * 组建微服务架构
> * 容器化软件都可用于基于 Linux 和 Windows 的应用程序

Docker 可以解决的项目痛点:
> * 需要频繁的升级，可以充分利用 docker 的镜像版本快速升级回退;
> * 开发，测试，线上的代码运行环境经常变更，每当你查了半天 bug，最后竟然是环境不一致的时候;
> * 销售演示或者 POC(Proof of Concept) 的 demo， 启动后无历史数据，免去清理数据的苦恼，但其实也有，但是便捷;
> * 项目体量过大，进行了微服务改造，需要统一管理，docker-compose 可以了解一下;
> * 占用资源过多，可以利用 docker 资源配额和设置启动策略，提升稳定性;
> * 整合开源服务，随着 docker 使用的普及，越来越多的开源项目提供了 docker 镜像部署。

Docker 运行环境限制:
> * 必须是64位机器上运行，目前仅支持 x86_64 和 AMD64，32系统不支持;
> * 系统的 Linux 内核必须是3.8或者更高，内核支持 Device Mapper，AUFS，VFS，btrfs 等存储格式;
> * 内核必须支持 cgroups 和命名空间。

Docker 与 虚拟机的区别
> 容器和虚拟机都具有相似的资源隔离和分配特点，但是功能不同，因为容器虚拟化了操作系统，而不是硬件，所以更加便携和高效
> ![](/images/docker-vs-vhost.png)
>
| 容器 | VM |
|:-------------|:------------------|
| 应用程序层的抽象，将代码和依赖项打包在一起【容器是应用层面的隔离】 | 将一台服务器转变为多台服务器的物理硬件的抽象【虚拟化是物理资源层面的隔离】 |
| 多个容器可以在同一台计算机上运行，并与其他容器共享OS内核 | 也允许多个VM在单台计算机上运行，但需要启动单独的虚拟机 OS |
| 仅有一个物理机的 OS，多个容器共享物理机的资源 | 多个 OS（物理机一个 OS，每个 VM 一个 OS），均独享资源 |
| 一台物理机可以运行数百个容器 | 一台物理机最多可以运行十来个虚拟机 |
| 容器镜像的大小通常为几十 MB | 包含操作系统、二进制文件、库，至少也要几个 GB |
| 可以在数秒内完成启动 | 和物理机启动时间一样慢，可能要几分钟 |
| 可以处理更多的应用程序，消耗的资源比 VM 少 |  |
| 每个容器在用户空间中作为隔离的进程运行 | |